<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<features name="karaf-extensions" xmlns="http://karaf.apache.org/xmlns/features/v1.4.0">
    <feature name="karaf-extender" description="Karaf Extender" version="${project.version}">
        <bundle dependency="true">mvn:com.google.guava/guava/${guavaVersion}</bundle>
        <bundle>mvn:org.opennms.container/extender/${project.version}</bundle>
    </feature>

    <feature name="scv" description="Secure Credentials Vault" version="${project.version}">
        <bundle dependency="true">mvn:commons-codec/commons-codec/${commonsCodecVersion}</bundle>
        <bundle dependency="true">mvn:com.google.guava/guava/${guavaVersion}</bundle>
        <bundle>mvn:org.opennms.features.scv/org.opennms.features.scv.api/${project.version}</bundle>
        <bundle>mvn:org.opennms.features.scv/org.opennms.features.scv.jceks-impl/${project.version}</bundle>
        <bundle>mvn:org.opennms.features.scv/org.opennms.features.scv.shell/${project.version}</bundle>
    </feature>

    <feature name="jetty" version="${jettyVersion}">
        <feature version="[${jettyVersion},10)">pax-jetty</feature>
    </feature>

    <feature name="pax-jetty" description="Provide Jetty engine support" version="${jettyVersion}">
        <bundle dependency="true" start-level="30">mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.activation-api-1.1/${karaf.servicemix.specs.version}</bundle>
        <bundle dependency="true" start-level="30">mvn:javax.servlet/javax.servlet-api/${servletApiVersion}</bundle>
        <bundle dependency="true" start-level="30">mvn:javax.mail/mail/${javaxMailVersion}</bundle>
        <bundle dependency="true" start-level="30">mvn:org.apache.geronimo.specs/geronimo-jta_1.1_spec/${geronimoVersion}</bundle>
        <bundle dependency="true" start-level="30">mvn:javax.annotation/javax.annotation-api/1.3.2</bundle>
        <bundle dependency="true" start-level="30">mvn:org.apache.aries.spifly/org.apache.aries.spifly.dynamic.bundle/1.2.4</bundle>
        <bundle dependency="true" start-level="30">mvn:org.apache.aries/org.apache.aries.util/1.1.3</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-continuation/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-http/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-io/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-plus/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-jndi/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-rewrite/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-security/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-server/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-servlet/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-servlets/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-util/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-util-ajax/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-webapp/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-jaas/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-xml/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-client/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-deploy/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-jmx/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty/jetty-proxy/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty.websocket/websocket-server/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty.websocket/websocket-client/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty.websocket/websocket-common/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty.websocket/websocket-servlet/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty.websocket/websocket-api/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty.websocket/javax-websocket-server-impl/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.eclipse.jetty.websocket/javax-websocket-client-impl/${jettyVersion}</bundle>
        <bundle start-level="30">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.javax-websocket-api/1.1_1</bundle>
        <capability>
            osgi.contract;osgi.contract=JavaServlet;version:Version="${servletApiVersion}";uses:="javax.servlet,javax.servlet.http,javax.servlet.descriptor,javax.servlet.annotation",
            osgi.contract;osgi.contract=JavaWebSockets;version:Version="1";uses:="javax.websocket, javax.websocket.server"
        </capability>
    </feature>
</features>
